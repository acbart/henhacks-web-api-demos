<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Web Animations API â€” Web API Demos</title>
  <link rel="stylesheet" href="css/style.css">
  <style>
    .stage {
      min-height: 180px;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      background: var(--bg);
      border-radius: var(--radius-sm);
      border: 1px solid var(--border);
    }
    .ball {
      width: 60px; height: 60px;
      border-radius: 50%;
      background: var(--primary);
      box-shadow: 0 0 20px rgba(99,102,241,0.6);
      position: absolute;
      cursor: pointer;
    }
    .demo-card {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: var(--radius-sm);
      padding: 14px 18px;
      cursor: pointer;
      transition: border-color 0.2s;
      text-align: center;
      font-size: 2rem;
      user-select: none;
    }
    .demo-card:hover { border-color: var(--primary); }
  </style>
</head>
<body>

<nav>
  <a href="index.html" class="back-link">â† Back to Index</a>
  <span class="nav-title">Web Animations API</span>
</nav>

<div class="page-header">
  <span class="api-badge">UI</span>
  <h1>Web Animations API</h1>
  <p>Drive CSS animations from JavaScript â€” control playback, scrub, reverse, and chain animations without any library. The same engine that powers CSS <code>@keyframes</code>.</p>
</div>

<main>

  <!-- Ball demo -->
  <div class="card">
    <div class="card-header"><span class="icon">âš½</span><h2>Bouncing Ball</h2></div>
    <div class="demo-area">
      <div class="btn-group">
        <button class="btn-primary" onclick="playBall()">â–¶ Play</button>
        <button class="btn-outline" onclick="pauseBall()">â¸ Pause</button>
        <button class="btn-outline" onclick="reverseBall()">âª Reverse</button>
        <button class="btn-outline" onclick="scrubBall()">â­ Jump to 50%</button>
      </div>
      <div class="stage" id="ballStage">
        <div class="ball" id="ball"></div>
      </div>
      <div class="field-row">
        <label style="min-width:80px">Speed:</label>
        <input type="range" id="speedSlider" min="200" max="3000" value="1000" style="flex:1">
        <span id="speedLabel" class="text-muted small">1000 ms</span>
      </div>
    </div>
  </div>

  <!-- Emoji playground -->
  <div class="card">
    <div class="card-header"><span class="icon">ğŸª</span><h2>Click to Animate</h2></div>
    <div class="demo-area">
      <p class="text-muted small">Click any emoji to trigger a one-shot animation:</p>
      <div class="btn-group" id="emojiRow">
        <div class="demo-card" onclick="popAnim(this)">ğŸ‰</div>
        <div class="demo-card" onclick="spinAnim(this)">ğŸŒ€</div>
        <div class="demo-card" onclick="shakeAnim(this)">ğŸ’¥</div>
        <div class="demo-card" onclick="fadeAnim(this)">ğŸ‘»</div>
        <div class="demo-card" onclick="bounceAnim(this)">ğŸ€</div>
      </div>
    </div>
  </div>

  <!-- Source code -->
  <div class="card">
    <div class="card-header"><span class="icon">ğŸ’»</span><h2>Source Code</h2></div>
    <div class="code-block">
      <pre><code>// â”€â”€ Basic keyframe animation â”€â”€
const ball = document.getElementById('ball');

const anim = ball.animate(
  [
    { transform: 'translateX(-200px)', offset: 0 },
    { transform: 'translateX(200px)',  offset: 1 },
  ],
  {
    duration: 1000,        // milliseconds
    easing: 'ease-in-out',
    iterations: Infinity,
    direction: 'alternate',
  }
);

// â”€â”€ Playback controls â”€â”€
anim.pause();
anim.play();
anim.reverse();

// â”€â”€ Scrub to a specific time â”€â”€
anim.currentTime = anim.effect.getTiming().duration * 0.5;

// â”€â”€ Change speed â”€â”€
anim.playbackRate = 2;    // 2Ã— faster

// â”€â”€ Promise when finished â”€â”€
anim.finished.then(() => console.log('Done!'));

// â”€â”€ One-shot pop animation â”€â”€
element.animate(
  [{ transform: 'scale(1)' }, { transform: 'scale(1.5)' }, { transform: 'scale(1)' }],
  { duration: 400, easing: 'cubic-bezier(0.36, 0.07, 0.19, 0.97)' }
);</code></pre>
    </div>
  </div>

  <!-- Key facts -->
  <div class="card">
    <div class="card-header"><span class="icon">ğŸ’¡</span><h2>Key Facts</h2></div>
    <div class="card-body">
      <ul style="padding-left:20px;display:flex;flex-direction:column;gap:8px;font-size:0.9rem;color:var(--text-muted)">
        <li><code>element.animate(keyframes, options)</code> returns an <strong style="color:var(--text)">Animation</strong> object you can pause, reverse, and cancel.</li>
        <li>Keyframes are plain objects with CSS property names in camelCase (e.g. <code>backgroundColor</code>).</li>
        <li><code>anim.finished</code> is a Promise that resolves when the animation completes.</li>
        <li>Use <code>anim.playbackRate</code> to speed up or slow down â€” even negative values (plays backwards).</li>
        <li><code>document.getAnimations()</code> returns all running animations on the page for inspection.</li>
      </ul>
    </div>
  </div>

</main>

<script>
  const ball = document.getElementById('ball');
  const stage = document.getElementById('ballStage');
  let ballAnim = null;

  function createBallAnim() {
    const dur = parseInt(document.getElementById('speedSlider').value);
    if (ballAnim) ballAnim.cancel();
    ballAnim = ball.animate(
      [
        { transform: 'translateX(-160px) scale(1)', offset: 0 },
        { transform: 'translateX(0) scale(1.1)',    offset: 0.5 },
        { transform: 'translateX(160px) scale(1)',  offset: 1 },
      ],
      { duration: dur, easing: 'ease-in-out', iterations: Infinity, direction: 'alternate' }
    );
    return ballAnim;
  }

  function playBall()    { if (!ballAnim) createBallAnim(); else ballAnim.play(); }
  function pauseBall()   { if (ballAnim) ballAnim.pause(); }
  function reverseBall() { if (!ballAnim) createBallAnim(); ballAnim.reverse(); }
  function scrubBall()   {
    if (!ballAnim) createBallAnim();
    ballAnim.pause();
    ballAnim.currentTime = ballAnim.effect.getTiming().duration * 0.5;
  }

  document.getElementById('speedSlider').addEventListener('input', (e) => {
    document.getElementById('speedLabel').textContent = e.target.value + ' ms';
    if (ballAnim) {
      const wasPlaying = ballAnim.playState === 'running';
      createBallAnim();
      if (!wasPlaying) ballAnim.pause();
    }
  });

  // start paused
  createBallAnim();
  ballAnim.pause();

  // One-shot animations
  function popAnim(el) {
    el.animate(
      [{ transform:'scale(1)' }, { transform:'scale(1.6)' }, { transform:'scale(1)' }],
      { duration: 400, easing: 'cubic-bezier(0.36,0.07,0.19,0.97)' }
    );
  }
  function spinAnim(el) {
    el.animate(
      [{ transform:'rotate(0deg)' }, { transform:'rotate(720deg)' }],
      { duration: 600, easing: 'ease-out' }
    );
  }
  function shakeAnim(el) {
    el.animate(
      [
        { transform:'translateX(0)' }, { transform:'translateX(-10px)' },
        { transform:'translateX(10px)' }, { transform:'translateX(-8px)' },
        { transform:'translateX(8px)' }, { transform:'translateX(0)' },
      ],
      { duration: 400 }
    );
  }
  function fadeAnim(el) {
    el.animate(
      [{ opacity:1 }, { opacity:0 }, { opacity:1 }],
      { duration: 800, easing: 'ease-in-out' }
    );
  }
  function bounceAnim(el) {
    el.animate(
      [
        { transform:'translateY(0)' }, { transform:'translateY(-30px)' },
        { transform:'translateY(0)' }, { transform:'translateY(-15px)' },
        { transform:'translateY(0)' },
      ],
      { duration: 600, easing: 'ease-in-out' }
    );
  }
</script>

<script src="qr-badge.js" defer></script>
</body>
</html>
