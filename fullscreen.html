<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fullscreen API ‚Äî Web API Demos</title>
  <link rel="stylesheet" href="css/style.css">
  <style>
    #fullscreenTarget {
      background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%);
      border: 2px solid var(--border);
      border-radius: var(--radius);
      min-height: 300px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 16px;
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
      overflow: hidden;
    }
    #fullscreenTarget:hover { border-color: var(--primary); }
    #fullscreenTarget .fs-title {
      font-size: 2rem;
      font-weight: 700;
      text-align: center;
    }
    #fullscreenTarget .fs-hint {
      font-size: 0.85rem;
      color: var(--text-muted);
    }
    /* Styles that only apply when fullscreen */
    #fullscreenTarget:fullscreen,
    #fullscreenTarget:-webkit-full-screen {
      border-radius: 0;
      border: none;
      background: radial-gradient(ellipse at center, #1e1b4b 0%, #0f172a 70%);
    }
    #fullscreenTarget:fullscreen .fs-title,
    #fullscreenTarget:-webkit-full-screen .fs-title {
      font-size: 4rem;
    }
    .fs-overlay-controls {
      position: absolute;
      bottom: 20px;
      right: 20px;
      display: none;
    }
    #fullscreenTarget:fullscreen .fs-overlay-controls,
    #fullscreenTarget:-webkit-full-screen .fs-overlay-controls {
      display: flex;
      gap: 10px;
    }
    .video-demo {
      background: #000;
      border-radius: var(--radius-sm);
      aspect-ratio: 16/9;
      width: 100%;
      max-width: 400px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-muted);
      font-size: 0.85rem;
      position: relative;
    }
    .video-demo video { width:100%; height:100%; border-radius:var(--radius-sm); }
  </style>
</head>
<body>

<nav>
  <a href="index.html" class="back-link">‚Üê Back to Index</a>
  <span class="nav-title">Fullscreen API</span>
</nav>

<div class="page-header">
  <span class="api-badge">UI</span>
  <h1>Fullscreen API</h1>
  <p>Programmatically expand any element ‚Äî or the entire document ‚Äî to fill the screen. Perfect for games, presentations, video players, and immersive experiences.</p>
</div>

<main>

  <div class="card">
    <div class="card-header"><span class="icon">‚õ∂</span><h2>Live Demo</h2></div>
    <div class="demo-area">
      <p class="text-muted small">Click the panel below (or the button) to go fullscreen. Press <kbd style="background:var(--bg);border:1px solid var(--border);padding:1px 6px;border-radius:3px">Esc</kbd> to exit.</p>

      <div id="fullscreenTarget" onclick="toggleFullscreen(document.getElementById('fullscreenTarget'))">
        <div class="fs-title">‚ú® Click to go Fullscreen ‚ú®</div>
        <div class="fs-hint" id="fsHint">Any element can go fullscreen</div>
        <div class="fs-overlay-controls">
          <button class="btn-outline" onclick="exitFullscreen(event)">‚úï Exit Fullscreen</button>
        </div>
      </div>

      <div class="btn-group">
        <button class="btn-primary" onclick="toggleFullscreen(document.getElementById('fullscreenTarget'))">
          ‚õ∂ Fullscreen Panel
        </button>
        <button class="btn-outline" onclick="toggleFullscreen(document.documentElement)">
          üñ•Ô∏è Fullscreen Page
        </button>
        <button class="btn-danger" onclick="exitFullscreen()">‚úï Exit</button>
      </div>

      <div class="status-box" id="status">Not in fullscreen</div>
    </div>
  </div>

  <div class="card">
    <div class="card-header"><span class="icon">üíª</span><h2>Source Code</h2></div>
    <div class="code-block">
      <pre><code>// Enter fullscreen ‚Äî works on any element
async function enterFullscreen(element) {
  if (element.requestFullscreen) {
    await element.requestFullscreen();
  } else if (element.webkitRequestFullscreen) { // Safari
    element.webkitRequestFullscreen();
  }
}

// Exit fullscreen
function exitFullscreen() {
  if (document.exitFullscreen) {
    document.exitFullscreen();
  } else if (document.webkitExitFullscreen) {
    document.webkitExitFullscreen();
  }
}

// Check if we're currently fullscreen
const isFullscreen = () => !!document.fullscreenElement;

// Listen for fullscreen changes
document.addEventListener('fullscreenchange', () => {
  if (document.fullscreenElement) {
    console.log('Entered fullscreen:', document.fullscreenElement);
  } else {
    console.log('Exited fullscreen');
  }
});

// CSS: style element differently when fullscreen
// #myElement:fullscreen { background: black; font-size: 4rem; }</code></pre>
    </div>
  </div>

  <div class="card">
    <div class="card-header"><span class="icon">üí°</span><h2>Key Facts</h2></div>
    <div class="card-body">
      <ul style="padding-left:20px;display:flex;flex-direction:column;gap:8px;font-size:0.9rem;color:var(--text-muted)">
        <li>Call <code>element.requestFullscreen()</code> on <em>any</em> element ‚Äî not just the document.</li>
        <li><code>document.fullscreenElement</code> returns the element currently in fullscreen, or <code>null</code>.</li>
        <li>Users can always exit via <kbd>Esc</kbd> ‚Äî you cannot prevent this.</li>
        <li>The <code>:fullscreen</code> CSS pseudo-class lets you apply styles only when an element is fullscreen.</li>
        <li>Requires a user gesture (click, keypress) to enter fullscreen ‚Äî you cannot auto-fullscreen on page load.</li>
        <li>The <code>fullscreenchange</code> and <code>fullscreenerror</code> events fire on <code>document</code>.</li>
      </ul>
    </div>
  </div>


  <div class="card">
    <div class="card-header"><span class="icon">üìö</span><h2>MDN Documentation</h2></div>
    <div class="card-body">
      <ul style="padding-left:20px;display:flex;flex-direction:column;gap:8px;font-size:0.9rem;">
        <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Fullscreen_API" target="_blank" rel="noopener" style="color:var(--accent)">MDN: Fullscreen API</a></li>
        <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Element/requestFullscreen" target="_blank" rel="noopener" style="color:var(--accent)">MDN: Element.requestFullscreen()</a></li>
      </ul>
    </div>
  </div>

</main>

<script>
  async function toggleFullscreen(el) {
    if (document.fullscreenElement) {
      await document.exitFullscreen();
    } else {
      try {
        await el.requestFullscreen();
      } catch(e) {
        setStatus('Error: ' + e.message, 'error');
      }
    }
  }

  async function exitFullscreen(e) {
    if (e) e.stopPropagation();
    await document.exitFullscreen();
  }

  document.addEventListener('fullscreenchange', () => {
    const el = document.fullscreenElement;
    if (el) {
      setStatus(`Fullscreen: <${el.tagName.toLowerCase()}${el.id ? '#'+el.id : ''}>`, 'ok');
      document.getElementById('fsHint').textContent = 'Press Esc to exit';
    } else {
      setStatus('Not in fullscreen');
      document.getElementById('fsHint').textContent = 'Any element can go fullscreen';
    }
  });

  function setStatus(msg, type='') {
    const s = document.getElementById('status');
    s.textContent = msg;
    s.style.color = type==='error' ? 'var(--danger)' : type==='ok' ? 'var(--success)' : 'var(--accent)';
  }
</script>

<script src="qr-badge.js" defer></script>
</body>
</html>
